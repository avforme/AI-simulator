#!/usr/bin/env python3

from argparse import ArgumentParser
from re import search

parser = ArgumentParser()
parser.add_argument('directory', nargs='+')
args = parser.parse_args()

evals = []
for dir in args.directory:

    with open(dir + '/eval.log') as f:

        s = f.read()
        m = search(r'Properties for first episode:(.*\n)+Evaluation certainty equivalent: (\d+\.\d+) \+/- (\d+\.\d+).*', s)
        properties = m.group(0)
        ce = float(m.group(2))
        ce_stdev = float(m.group(3))
        evals.append((ce, ce_stdev, properties))

evals.sort()

print('Certainty equivalents:')
for e in evals:
    print(e[0], '+/-', e[1])

print('Best result:')
print(evals[-1][2])
