<!--

AIPlanner - Deep Learning Financial Planner
Copyright (C) 2018-2019 Gordon Irlam

All rights reserved. This program may not be used, copied, modified,
or redistributed without permission.

This program is distributed WITHOUT ANY WARRANTY; without even the
implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE.

-->

<div *ngIf="results" class="result-component">
  <h1 *ngIf="mode == 'prelim'" class="title">Preliminary Results</h1>
  <h1 *ngIf="mode == 'full'" class="title">{{results.name}}</h1>
  <div *ngIf="results.error != null">
    <p>
      Problem detected:
      <span class="error">
        {{results.error}}
      </span>
    </p>
  </div>
  <div *ngIf="results.error == null">
    <div class="center">
      <img src="{{results.data_dir}}/aiplanner-wealth.svg" height="200">
    </div>
    <div class="float-right">
      <img src="{{results.data_dir}}/aiplanner-asset_allocation.svg" height="200">
    </div>
    <p>
      Current recommended after tax consumption: {{results.consume}}
    </p>
    <p *ngIf="results.nominal_spias_purchase != null">
      Recommended SPIA purchase amount: {{results.nominal_spias_purchase}}
    </p>
    <p>
      Recommended {{results.asset_classes}} investment asset allocation: {{results.asset_allocation}}
      <br>
      Bonds duration: {{results.real_bonds_duration}} years ({{(results.real_bonds_duration <= 9) ? ((results.real_bonds_duration <= 2) ? "short" : "intermediate") : "long"}} term)
    </p>
    <p>
      Current recommended retirement plan contribution: {{results.retirement_contribution}}
    </p>
    <div>
      Certainty equivalent retirement consumption: {{results.ce}}
      <div class="small-font">
        Standard error of measurement of CE: {{results.ce_stderr}}
      </div>
    </div>
    <p>
      Probability retirement consumption below {{results.consume_preretirement}}: {{results.consume_preretirement_ppf}}%
      <br>
      10% chance of annual retirement consumption below: {{results.ce_low}}
    </p>
    <div class="float-clear"></div>
    <div>
      <img src="{{results.data_dir}}/aiplanner-consume-pdf.svg" width="50%"/>
      <img src="{{results.data_dir}}/aiplanner-paths-consume.svg" width="50%"/>
    </div>
    <div>
      <img src="{{results.data_dir}}/aiplanner-paths-gi.svg" width="50%"/>
      <img src="{{results.data_dir}}/aiplanner-paths-p.svg" width="50%"/>
    </div>
  </div>
</div>
