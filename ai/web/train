#!/bin/bash

# AIPlanner - Deep Learning Financial Planner
# Copyright (C) 2018 Gordon Irlam
#
# All rights reserved. This program may not be used, copied, modified,
# or redistributed without permission.
#
# This program is distributed WITHOUT ANY WARRANTY; without even the
# implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
# PURPOSE.

AIPLANNER_HOME=${AIPLANNER_HOME:-$HOME/aiplanner}

source $AIPLANNER_HOME/ai/helpers.bash

mkdir -p ~/aiplanner-data/models.new
cd ~/aiplanner-data/models.new

PARALLEL=Jobs

SPIAS_TYPE=nominal
SAVESTEPS=2000000

TRAINING=generic
UNIT=single

for STAGE in preretirement retired; do

    for SPIAS in none $SPIAS_TYPE; do

        for GAMMA in 1.5 3 6; do

            TIMESTEPS=`timesteps $TRAINING $UNIT $STAGE $SPIAS $GAMMA`
            ARGS="--train-num-timesteps=$TIMESTEPS --train-save-frequency=$SAVESTEPS"

            train $TRAINING $UNIT $STAGE $SPIAS $GAMMA "$ARGS"

        done
    done
done

wait

cp $BASE_SCENARIO ./base-scenario.txt
